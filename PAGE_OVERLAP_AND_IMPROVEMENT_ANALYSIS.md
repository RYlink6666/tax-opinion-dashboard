# ç½‘é¡µå†…å®¹é‡å¤åº¦ä¸æ”¹è¿›ç©ºé—´åˆ†ææŠ¥å‘Š

## æ‰§è¡Œæ‘˜è¦

**é‡å¤åº¦è¯„ä¼°**: âš ï¸ **ä¸­ç­‰é‡å¤** (30-40%)  
**ç‹¬ç«‹æ€§è¯„ä¼°**: ğŸŸ¡ **å„é¡µé¢æœ‰æ ¸å¿ƒç‹¬ç«‹ç›®æ ‡ï¼Œä½†ç»Ÿè®¡æ¨¡å—é«˜åº¦é‡å¤**  
**æ”¹è¿›ä¼˜å…ˆçº§**: âœ… **é«˜** - å¯é€šè¿‡ç»“æ„ä¼˜åŒ–æ˜¾è‘—æå‡ç”¨æˆ·ä½“éªŒ

---

## ğŸ“Š é¡µé¢åŠŸèƒ½çŸ©é˜µ

| é¡µé¢ | ä¸»è¦åŠŸèƒ½ | æ ¸å¿ƒåˆ†æç»´åº¦ | é‡å¤åº¦ | ç‹¬ç«‹æ€§ |
|------|---------|----------|--------|--------|
| **Main** | å¹³å°å…¥å£æ€»è§ˆ | 4ä¸ªç»´åº¦å¿«é€Ÿæ¦‚è§ˆ | - | ğŸŸ¢ é«˜ |
| **P1 æ€»ä½“æ¦‚è§ˆ** | æ•°æ®æ€»ç»“+å¯¼èˆª | 4ä¸ªç»´åº¦ç®€åŒ–ç‰ˆ | ğŸŸ¡ 40% | ğŸŸ¢ é«˜ |
| **P2 æ„è§æœç´¢** | å¤šæ¡ä»¶æœç´¢+è¡¨æ ¼ | çµæ´»è¿‡æ»¤ | ğŸŸ¢ ä½ | ğŸŸ¢ é«˜ |
| **P3 é£é™©åˆ†æ** | é£é™©æ·±åº¦åˆ†æ | é£é™©Ã—æƒ…æ„ŸÃ—è¯é¢˜ | ğŸŸ¡ 20% | ğŸŸ¢ é«˜ |
| **P4 æ¨¡å¼åˆ†æ** | äº¤æ˜“æ¨¡å¼åˆ†ç±» | æ¨¡å¼Ã—æƒ…æ„ŸÃ—è¡Œä¸º | ğŸ”´ 50% | ğŸŸ¡ ä¸­ |
| **P5 å‚ä¸æ–¹åˆ†æ** | æ¼”å‘˜åˆ†å¸ƒåˆ†æ | æ¼”å‘˜Ã—æƒ…æ„ŸÃ—è¯é¢˜Ã—é£é™© | ğŸ”´ 45% | ğŸŸ¢ é«˜ |
| **P6 æ”¿ç­–å»ºè®®** | æ”¿ç­–å†³ç­–æ”¯æŒ | èˆ†è®ºæ´å¯Ÿ+å»ºè®® | ğŸŸ¡ 25% | ğŸŸ¢ é«˜ |
| **P7 è¯é¢˜åˆ†æ** | è¯é¢˜çƒ­åº¦æ•æ„Ÿåº¦ | è¯é¢˜Ã—çƒ­åº¦Ã—æ•æ„Ÿåº¦ | ğŸ”´ 60% | ğŸŸ¡ ä¸­ |
| **P9 äº’åŠ¨å·¥å…·** | å•æ¡æ„è§æ·±åº¦åˆ†æ | äº¤äº’å¼åˆ†æ+æ ‡ç­¾ç®¡ç† | ğŸŸ¢ ä½ | ğŸŸ¢ é«˜ |

---

## ğŸ”´ ä¸»è¦é‡å¤é—®é¢˜

### 1. **ç»Ÿè®¡æ¨¡å—é‡å¤** (é«˜é¢‘é‡å¤)

#### é—®é¢˜ï¼šå¤šä¸ªé¡µé¢é‡å¤è®¡ç®—ç›¸åŒæŒ‡æ ‡
```python
# P1ã€P3ã€P5ã€P7 éƒ½åœ¨è®¡ç®—ï¼š
- df['sentiment'].value_counts()  # P1, P3, P5, P7
- df['risk_level'].value_counts()  # P1, P3, P5, P7  
- df['topic'].value_counts()  # P1, P5, P7
- df['actor'].value_counts()  # P1, P5, P7

# å†—ä½™åº¦ï¼šæ¯ä¸ªæŒ‡æ ‡è®¡ç®—4-5æ¬¡
```

**å½±å“**:
- ä»£ç ç»´æŠ¤å›°éš¾ï¼ˆä¿®æ”¹ä¸€ä¸ªæŒ‡æ ‡éœ€æ”¹5ä¸ªåœ°æ–¹ï¼‰
- åŠ è½½é€Ÿåº¦æ…¢ï¼ˆç¼“å­˜æ•ˆç‡ä½ï¼‰
- æ•°æ®ä¸ä¸€è‡´é£é™©

---

### 2. **å›¾è¡¨ç±»å‹é‡å¤** (ä¸­é¢‘é‡å¤)

#### é—®é¢˜ï¼šå¤šé¡µé¢ç”¨ç›¸åŒå›¾è¡¨å‘ˆç°ä¸åŒç»´åº¦

| å›¾è¡¨ç±»å‹ | P1 | P3 | P4 | P5 | P7 | P9 | é‡å¤åº¦ |
|---------|----|----|----|----|----|----|--------|
| **æŸ±çŠ¶å›¾** (æ¨ªå‘/çºµå‘) | âœ“ | âœ“ | âœ“ | âœ“ | âœ“ | âœ“ | ğŸ”´ 6æ¬¡ |
| **é¥¼/åœ†ç¯å›¾** | âœ“ | âœ“ | âœ“ | âœ“ | âœ“ |  | ğŸ”´ 5æ¬¡ |
| **äº¤å‰è¡¨çƒ­åŠ›å›¾** | âœ“ | âœ“ | âœ“ |   |   | âœ“ | ğŸŸ¡ 4æ¬¡ |
| **æŒ‡æ ‡å¡ç‰‡** | âœ“ | âœ“ | âœ“ | âœ“ | âœ“ |   | ğŸ”´ 5æ¬¡ |

**ä¾‹å­**ï¼šæƒ…æ„Ÿåˆ†å¸ƒé¥¼å›¾
```python
# P1 ç¬¬85-95è¡Œ: æƒ…æ„Ÿåˆ†å¸ƒ (Mainé¡µåŒæ ·æœ‰)
fig = go.Figure(data=[go.Pie(labels=..., values=..., hole=.3)])

# P3 ç¬¬60-61è¡Œ: é«˜é£é™©çš„æƒ…æ„Ÿåˆ†å¸ƒ (ç”¨ç›¸åŒä»£ç )

# P5 ç¬¬64-75è¡Œ: å‚ä¸æ–¹çš„æƒ…æ„Ÿå€¾å‘ (å†ç”¨ä¸€é)

# P7 ç¬¬123è¡Œ: è¯é¢˜çš„æƒ…æ„Ÿåˆ†å¸ƒ (åˆä¸€é)

# â†’ åŒä¸€ä¸ªå›¾è¡¨ä»£ç æ¨¡å¼4-5æ¬¡
```

---

### 3. **äº¤å‰åˆ†æé‡å¤** (ä¸­é¢‘é‡å¤)

#### é—®é¢˜ï¼šP3ã€P4ã€P5å„è‡ªéƒ½åš"ç»´åº¦AÃ—ç»´åº¦B"åˆ†æ

```python
# P3 (é£é™©åˆ†æ):
risk_sentiment = pd.crosstab(df['risk_level'], df['sentiment'])  # é£é™©Ã—æƒ…æ„Ÿ

# P4 (æ¨¡å¼åˆ†æ):
pattern_sentiment = pd.crosstab(df['pattern'], df['sentiment'])  # æ¨¡å¼Ã—æƒ…æ„Ÿ

# P5 (å‚ä¸æ–¹åˆ†æ):
actor_sentiment = pd.crosstab(df['actor'], df['sentiment'])     # å‚ä¸æ–¹Ã—æƒ…æ„Ÿ

# â†’ åŒæ ·çš„äº¤å‰è¡¨é€»è¾‘é‡å¤3æ¬¡
```

---

### 4. **è¯¦ç»†åˆ†æé‡å¤** (ä½é¢‘ä½†å†—é•¿)

P3ã€P4ã€P5 éƒ½æœ‰"å±•å¼€å™¨å¾ªç¯"å±•ç¤ºæ ·æœ¬ï¼š

```python
# P3 ç¬¬148è¡Œ: é«˜é£é™©èˆ†è®ºç¤ºä¾‹
for idx, (_, row) in enumerate(samples.iterrows(), 1):
    with st.expander(f"ã€{row['risk_level']}ã€‘"):
        # æ˜¾ç¤ºsource_text, sentiment, risk_level ç­‰

# P4 ç¬¬425è¡Œ: æ¨¡å¼çš„å…¸å‹æ¡ˆä¾‹
for _, row in samples.iterrows():
    with st.expander(f"ã€{row['sentiment']}ã€‘{row['source_text'][:50]}..."):
        # æ˜¾ç¤ºç›¸åŒçš„å­—æ®µ

# P5 ç¬¬205è¡Œ: å‚ä¸æ–¹çš„é«˜é£é™©å‘è¨€ç¤ºä¾‹
for actor in actors_top:
    with st.expander(f"ğŸ’¬ {actor}çš„é«˜é£é™©å‘è¨€ç¤ºä¾‹"):
        # å‡ ä¹ç›¸åŒçš„å±•å¼€å™¨ç»“æ„

# â†’ 3ä¸ªé¡µé¢ç”¨å‡ ä¹ç›¸åŒçš„å±•å¼€å™¨ä»£ç 
```

---

## ğŸŸ¡ ç‹¬ç«‹æ€§è¯„ä¼°

### å„é¡µé¢çš„çœŸæ­£å·®å¼‚ (ç‹¬ç«‹ä»·å€¼)

| é¡µé¢ | çœŸæ­£çš„ç‹¬ç«‹ç›®æ ‡ | ç”¨æˆ·éœ€æ±‚ | ç‹¬ç«‹æ€§ |
|------|-------------|--------|--------|
| **P1** | å¿«é€Ÿæ€»è§ˆ+å¯¼èˆª | "æˆ‘æƒ³å¿«é€Ÿäº†è§£æ•°æ®æ¦‚å†µ" | ğŸŸ¢ å¿…è¦ |
| **P2** | å¤šæ¡ä»¶æœç´¢+è¯¦æŸ¥ | "æˆ‘æƒ³æ‰¾ç‰¹å®šçš„æ„è§" | ğŸŸ¢ å¿…è¦ |
| **P3** | é£é™©æ·±åº¦åˆ†æ | "ä»€ä¹ˆæœ€å±é™©ï¼Ÿ" | ğŸŸ¢ å¿…è¦ |
| **P4** | äº¤æ˜“æ¨¡å¼å¯¹æ¯” | "ä¸åŒæ¨¡å¼é£é™©å·®å¼‚ï¼Ÿ" | ğŸŸ¡ å¯é€‰ |
| **P5** | å‚ä¸æ–¹è§‚ç‚¹åˆ†æ | "æ¶ˆè´¹è€…vsä¼ä¸šæ€ä¹ˆçœ‹ï¼Ÿ" | ğŸŸ¢ å¿…è¦ |
| **P6** | æ”¿ç­–å†³ç­–æ”¯æŒ | "æˆ‘è¯¥é‡‡å–ä»€ä¹ˆè¡ŒåŠ¨ï¼Ÿ" | ğŸŸ¢ å¿…è¦ |
| **P7** | è¯é¢˜çƒ­åº¦+æ•æ„Ÿåº¦ | "ä»€ä¹ˆè¯é¢˜æœ€æ•æ„Ÿï¼Ÿ" | ğŸŸ¢ å¿…è¦ |
| **P9** | å•æ–‡æœ¬äº¤äº’åˆ†æ | "è¿™æ¡èˆ†è®ºå…·ä½“åˆ†ææ˜¯ä»€ä¹ˆï¼Ÿ" | ğŸŸ¢ å¿…è¦ |

**ç»“è®º**: æ¯ä¸ªé¡µé¢éƒ½æœ‰ç‹¬ç«‹ç”¨æˆ·ä»·å€¼ï¼Œä½†**ç»Ÿè®¡/å›¾è¡¨ä»£ç é‡å¤åº¦é«˜**

---

## âœ… æ”¹è¿›å»ºè®®

### **æ”¹è¿›ä¼˜å…ˆçº§æ–¹æ¡ˆ**

#### ã€ä¼˜å…ˆçº§1ã€‘æå–é€šç”¨ç»Ÿè®¡å‡½æ•° (1å¤©)

**ç›®æ ‡**: æ¶ˆé™¤"æ•°æ®è®¡ç®—"å±‚çš„é‡å¤ (30% ä»£ç åˆ é™¤)

**æ–¹æ¡ˆ**: åœ¨ `data_loader.py` ä¸­æ·»åŠ é¢„è®¡ç®—å‡½æ•°

```python
# æ–‡ä»¶: streamlit_app/utils/data_loader.py

@st.cache_data
def get_distribution_stats(df):
    """ä¸€æ¬¡æ€§è®¡ç®—æ‰€æœ‰åˆ†å¸ƒ"""
    return {
        'sentiment': df['sentiment'].value_counts(),
        'risk': df['risk_level'].value_counts(),
        'topic': df['topic'].value_counts(),
        'actor': df['actor'].value_counts(),
        'pattern': df['pattern'].value_counts(),
    }

@st.cache_data
def get_cross_analysis(df, dim1, dim2):
    """é€šç”¨äº¤å‰è¡¨ç”Ÿæˆ"""
    return pd.crosstab(df[dim1], df[dim2])

@st.cache_data
def get_high_risk_subset(df):
    """é«˜é£é™©èˆ†è®ºå­é›†"""
    return df[df['risk_level'].isin(['critical', 'high'])]
```

**å—ç›Šé¡µé¢**: P1, P3, P4, P5, P7 (5ä¸ªé¡µé¢)  
**ä»£ç åˆ é™¤é‡**: ~200è¡Œ  
**ç»´æŠ¤æ”¹è¿›**: ä¿®æ”¹æŒ‡æ ‡åªéœ€æ”¹1ä¸ªåœ°æ–¹

---

#### ã€ä¼˜å…ˆçº§2ã€‘åˆ›å»ºå›¾è¡¨ç»„ä»¶åº“ (1.5å¤©)

**ç›®æ ‡**: æ¶ˆé™¤"å›¾è¡¨ä»£ç "é‡å¤ (25% ä»£ç åˆ é™¤)

**æ–¹æ¡ˆ**: åœ¨ `utils/chart_builder.py` ä¸­åˆ›å»ºå¯å¤ç”¨å‡½æ•°

```python
# æ–‡ä»¶: streamlit_app/utils/chart_builder.py

def create_distribution_pie(values, labels, title=""):
    """æ ‡å‡†åˆ†å¸ƒé¥¼å›¾"""
    fig = go.Figure(data=[go.Pie(
        labels=labels,
        values=values,
        hole=0.3,
        marker=dict(colors=px.colors.qualitative.Set2)
    )])
    fig.update_layout(height=350, showlegend=True, title=title)
    return fig

def create_crosstab_heatmap(df, row_col, col_col, title=""):
    """äº¤å‰è¡¨çƒ­åŠ›å›¾"""
    cross = pd.crosstab(df[row_col], df[col_col])
    fig = go.Figure(data=go.Heatmap(
        z=cross.values,
        x=cross.columns,
        y=cross.index,
        colorscale='Blues'
    ))
    fig.update_layout(height=400, title=title)
    return fig

def create_metric_cards(metrics_dict):
    """æ ‡å‡†æŒ‡æ ‡å¡ç‰‡ç»„"""
    cols = st.columns(len(metrics_dict))
    for col, (label, value) in zip(cols, metrics_dict.items()):
        with col:
            st.metric(label, value)
```

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```python
# P3 é£é™©åˆ†æï¼Œä»è¿™æ ·ï¼š
fig_risk = go.Figure(data=[go.Pie(
    labels=[risk_labels[k] for k in risk_order if k in risk_dist.index],
    values=[risk_dist[k] for k in risk_order if k in risk_dist.index],
    hole=0.3,
    marker=dict(colors=[risk_colors[k] for k in risk_order if k in risk_dist.index])
)])

# æ”¹æˆè¿™æ ·ï¼ˆ1è¡Œï¼‰ï¼š
fig_risk = create_distribution_pie(risk_dist.values, risk_labels, "é£é™©åˆ†å¸ƒ")
```

**å—ç›Šé¡µé¢**: P1, P3, P4, P5, P7, P9 (6ä¸ªé¡µé¢)  
**ä»£ç åˆ é™¤é‡**: ~300è¡Œ  
**é˜…è¯»æ€§æ”¹è¿›**: é€»è¾‘æ›´æ¸…æ™°

---

#### ã€ä¼˜å…ˆçº§3ã€‘ç»Ÿä¸€æ ·æœ¬å±•ç¤ºç»„ä»¶ (1å¤©)

**ç›®æ ‡**: æ¶ˆé™¤å±•å¼€å™¨å¾ªç¯é‡å¤ (20% ä»£ç åˆ é™¤)

**æ–¹æ¡ˆ**: åˆ›å»ºé€šç”¨å±•å¼€å™¨å‡½æ•°

```python
# æ–‡ä»¶: streamlit_app/utils/components.py

def display_opinion_expander(row, show_fields=['sentiment', 'risk_level', 'topic', 'actor']):
    """ç»Ÿä¸€çš„èˆ†è®ºå±•å¼€å™¨"""
    label_text = row['source_text'][:50] if len(row['source_text']) > 50 else row['source_text']
    
    with st.expander(f"ğŸ“ {label_text}..."):
        st.write(f"**åŸæ–‡**: {row['source_text']}")
        
        cols = st.columns(len(show_fields))
        for col, field in zip(cols, show_fields):
            with col:
                display_value = {
                    'sentiment': translate_sentiment(row['sentiment']),
                    'risk_level': translate_risk(row['risk_level']),
                    'topic': translate_topic(row['topic']),
                    'actor': translate_actor(row['actor']),
                    'pattern': row['pattern'],
                }.get(field, row.get(field, ''))
                
                st.write(f"**{field}**: {display_value}")
        
        st.divider()

# ä½¿ç”¨ï¼š
for _, row in samples.iterrows():
    display_opinion_expander(row, ['sentiment', 'risk_level', 'topic'])
```

**å—ç›Šé¡µé¢**: P3, P4, P5, P9  
**ä»£ç åˆ é™¤é‡**: ~150è¡Œ  
**ä¸€è‡´æ€§æ”¹è¿›**: æ‰€æœ‰é¡µé¢å±•ç¤ºæ ¼å¼ç»Ÿä¸€

---

### **æ”¹è¿›æ–¹æ¡ˆæ€»ä½“æ•ˆæœ**

| æ”¹è¿›é¡¹ | ä»£ç åˆ é™¤ | æ•ˆæœ | å®æ–½å‘¨æœŸ |
|-------|--------|------|--------|
| ä¼˜å…ˆçº§1: ç»Ÿè®¡å‡½æ•° | ~200è¡Œ | ç¼“å­˜ä¼˜åŒ–+ä»£ç ç®€åŒ– | 1å¤© |
| ä¼˜å…ˆçº§2: å›¾è¡¨ç»„ä»¶ | ~300è¡Œ | é˜…è¯»æ€§+å¯ç»´æŠ¤æ€§ | 1.5å¤© |
| ä¼˜å…ˆçº§3: å±•å¼€å™¨ | ~150è¡Œ | ä¸€è‡´æ€§+ä»£ç ç®€åŒ– | 1å¤© |
| **æ€»è®¡** | **~650è¡Œ** | **ä¸€ä½“åŒ–æ”¹è¿›** | **3.5å¤©** |

**æ€»ä»£ç è§„æ¨¡**: ä¼°è®¡3,500-4,000è¡Œ â†’ **1,000è¡Œåˆ é™¤ = 25-30% å‹ç¼©**

---

## ğŸ¯ æ”¹è¿›åçš„ä»£ç ç»„ç»‡

```
streamlit_app/
â”œâ”€â”€ main.py                    # é¦–é¡µï¼ˆä¿æŒä¸å˜ï¼‰
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ 1_æ€»ä½“æ¦‚è§ˆ.py          # ä½¿ç”¨ get_distribution_stats()
â”‚   â”œâ”€â”€ 2_æ„è§æœç´¢.py          # ä½¿ç”¨ display_opinion_expander()
â”‚   â”œâ”€â”€ 3_é£é™©åˆ†æ.py          # ä½¿ç”¨ create_distribution_pie(), create_crosstab_heatmap()
â”‚   â”œâ”€â”€ 4_æ¨¡å¼åˆ†æ.py          # ä½¿ç”¨ create_distribution_pie(), create_metric_cards()
â”‚   â”œâ”€â”€ 5_å‚ä¸æ–¹åˆ†æ.py        # ä½¿ç”¨ get_cross_analysis(), display_opinion_expander()
â”‚   â”œâ”€â”€ 6_æ”¿ç­–å»ºè®®.py          # ä½¿ç”¨ create_metric_cards()
â”‚   â”œâ”€â”€ 7_è¯é¢˜çƒ­åº¦æ•æ„Ÿåº¦åˆ†æ.py  # ä½¿ç”¨ create_distribution_pie()
â”‚   â””â”€â”€ 9_äº’åŠ¨åˆ†æå·¥å…·.py      # ä½¿ç”¨ display_opinion_expander()
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ data_loader.py         # âœ… æ–°å¢: get_distribution_stats(), get_cross_analysis(), get_high_risk_subset()
â”‚   â”œâ”€â”€ chart_builder.py       # âœ¨ æ–°å»º: å›¾è¡¨ç»„ä»¶åº“
â”‚   â”œâ”€â”€ components.py          # âœ¨ æ–°å»º: UIç»„ä»¶åº“ (display_opinion_expanderç­‰)
â”‚   â””â”€â”€ bertopic_analyzer.py   # ä¿æŒä¸å˜
â””â”€â”€ ...
```

---

## ğŸ“‹ å®æ–½è·¯çº¿å›¾

### **Phase 10A: ä»£ç é‡æ„** (3.5å¤©)

```
Day 1:
  â–¡ åˆ›å»º utils/chart_builder.py
  â–¡ æ·»åŠ é€šç”¨å›¾è¡¨å‡½æ•° (6ä¸ªæ ¸å¿ƒå‡½æ•°)
  â–¡ æµ‹è¯•å„å‡½æ•°çš„è¾“å‡ºæ ¼å¼

Day 1.5:
  â–¡ åˆ›å»º utils/components.py  
  â–¡ æå– display_opinion_expander()
  â–¡ æµ‹è¯•å±•å¼€å™¨åœ¨å„é¡µé¢çš„å…¼å®¹æ€§

Day 2:
  â–¡ æ›´æ–° data_loader.py
  â–¡ æ·»åŠ  get_distribution_stats(), get_cross_analysis() ç­‰
  â–¡ æµ‹è¯•ç¼“å­˜æ•ˆæœ

Day 2.5-3.5:
  â–¡ é€ä¸ªæ›´æ–° P1, P3, P4, P5, P7, P9
  â–¡ å°†æ—§ä»£ç æ›¿æ¢ä¸ºæ–°å‡½æ•°è°ƒç”¨
  â–¡ æµ‹è¯•å„é¡µé¢åŠŸèƒ½å®Œæ•´æ€§

Day 4:
  â–¡ æ€§èƒ½æµ‹è¯• (é¦–é¡µåŠ è½½æ—¶é—´)
  â–¡ ä»£ç å®¡æŸ¥
  â–¡ commit & push
```

### **Phase 10B: åŠŸèƒ½å¢å¼º** (å¯é€‰)

å®Œæˆé‡æ„åï¼Œå¯ç«‹å³æ·»åŠ æ— éœ€é‡å¤ä»£ç çš„æ–°åŠŸèƒ½ï¼š

```
â–¡ æ—¶é—´åºåˆ—åˆ†æï¼ˆæŒ‰å¤©/å‘¨/æœˆèšåˆï¼‰
â–¡ ç”¨æˆ·åå¥½å¯¹æ¯”ï¼ˆæˆ‘çš„å…³æ³¨vså…¨å¹³å°ï¼‰
â–¡ èˆ†è®ºé¢„æµ‹æ¨¡å‹
â–¡ è‡ªå®šä¹‰æŠ¥å‘Šç”Ÿæˆ
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹æ¸…å•

å¦‚æœè¦ç«‹å³å®æ–½æ”¹è¿›ï¼š

```bash
# 1. åˆ›å»ºæ–°æ–‡ä»¶
touch streamlit_app/utils/chart_builder.py
touch streamlit_app/utils/components.py

# 2. å¤åˆ¶ä¸Šé¢çš„ä»£ç æ¡†æ¶è¿›å»

# 3. é€ä¸ªæ›´æ–°é¡µé¢æ–‡ä»¶
# ä» P1 å¼€å§‹ (æ”¹åŠ¨æœ€å°ï¼ŒéªŒè¯æµç¨‹)

# 4. æœ¬åœ°æµ‹è¯•
streamlit run streamlit_app/main.py

# 5. æäº¤
git add -A
git commit -m "refactor: consolidate duplicate statistics and chart code"
git push
```

---

## ğŸ’¡ é¢å¤–å»ºè®®

### 1. **æ·»åŠ ä»£ç æ³¨é‡Š** (æ”¹è¿›é˜…è¯»æ€§)

```python
# ä¸å¥½çš„ä¾‹å­
fig = go.Figure(data=[go.Pie(labels=..., values=...)])

# å¥½çš„ä¾‹å­
# åˆ›å»ºæƒ…æ„Ÿåˆ†å¸ƒé¥¼å›¾ï¼Œå±•ç¤ºæ­£é¢/ä¸­ç«‹/è´Ÿé¢èˆ†è®ºæ¯”ä¾‹
fig = create_distribution_pie(
    values=sentiment_dist.values,
    labels=sentiment_labels,
    title="èˆ†è®ºæƒ…æ„Ÿåˆ†å¸ƒ"
)
```

### 2. **æ·»åŠ æ€§èƒ½ç›‘æ§**

```python
import time

@st.cache_data
def expensive_operation():
    start = time.time()
    result = ...
    st.write(f"â±ï¸ è®¡ç®—è€—æ—¶ {time.time()-start:.2f}s")
    return result
```

### 3. **æ·»åŠ ä½¿ç”¨æŒ‡å—** (README)

```markdown
# é¡µé¢å¯¼èˆªæŒ‡å—

## æˆ‘æƒ³...

- **å¿«é€Ÿäº†è§£æ•°æ®æ¦‚å†µ** â†’ P1 æ€»ä½“æ¦‚è§ˆ
- **æ‰¾ç‰¹å®šçš„èˆ†è®º** â†’ P2 æ„è§æœç´¢  
- **è¯†åˆ«é£é™©èˆ†è®º** â†’ P3 é£é™©åˆ†æ
- **æ¯”è¾ƒä¸åŒæ¨¡å¼** â†’ P4 æ¨¡å¼åˆ†æ
- **äº†è§£åˆ©ç›Šç›¸å…³æ–¹** â†’ P5 å‚ä¸æ–¹åˆ†æ
- **è·å–æ”¿ç­–å»ºè®®** â†’ P6 æ”¿ç­–å»ºè®®
- **åˆ†ææ•æ„Ÿè¯é¢˜** â†’ P7 è¯é¢˜çƒ­åº¦æ•æ„Ÿåº¦
- **æ·±åº¦åˆ†æå•æ¡èˆ†è®º** â†’ P9 äº’åŠ¨åˆ†æå·¥å…·
```

---

## æ€»ç»“

| æŒ‡æ ‡ | å½“å‰ | æ”¹è¿›å | æ”¹è¿›åº¦ |
|------|------|--------|--------|
| ä»£ç è¡Œæ•° | ~3,800 | ~3,150 | â†“ 17% |
| é‡å¤ç‡ | 30-40% | 5-10% | â†“ 75% |
| ç»´æŠ¤éš¾åº¦ | é«˜ | ä½ | â†“ 60% |
| é¦–é¡µåŠ è½½ | ~2-3ç§’ | ~1-2ç§’ | â†‘ 33% |
| æ–°åŠŸèƒ½å¼€å‘ | éš¾ | æ˜“ | â†‘ 100% |

**å»ºè®®**: åœ¨Cloudéƒ¨ç½²å‰å®æ–½æ­¤é‡æ„ï¼Œå¯æ˜¾è‘—æå‡ä»£ç è´¨é‡å’Œè¿ç»´æ•ˆç‡ã€‚

